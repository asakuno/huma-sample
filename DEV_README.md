# ğŸš€ Development Environment Setup\n\nã“ã®ãƒ–ãƒ©ãƒ³ãƒã¯é–‹ç™ºç’°å¢ƒç”¨ã®è¨­å®šã§ã™ã€‚ãƒ¢ãƒƒã‚¯Cognitoã‚’ä½¿ç”¨ã—ã¦ã€å®Ÿéš›ã®AWS Cognitoãªã—ã§ã‚‚å‹•ä½œã—ã¾ã™ã€‚\n\n## ğŸ“‹ Quick Start\n\n### 1. ç’°å¢ƒå¤‰æ•°ã®ç¢ºèª\n```bash\n# .envãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ä½œæˆã•ã‚Œã¾ã™ãŒã€å¿…è¦ã«å¿œã˜ã¦ç·¨é›†ã—ã¦ãã ã•ã„\ncat .env\n```\n\n### 2. é–‹ç™ºç’°å¢ƒã®èµ·å‹•\n```bash\n# æ–¹æ³•1: Makefileã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰\nmake dev-start\n\n# æ–¹æ³•2: ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç›´æ¥å®Ÿè¡Œ\n./scripts/dev-start.sh\n\n# æ–¹æ³•3: Docker Composeã‚’ç›´æ¥ä½¿ç”¨\ndocker-compose up -d\n```\n\n### 3. API ãƒ†ã‚¹ãƒˆ\n```bash\n# è‡ªå‹•ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ\nmake dev-test\n\n# ã¾ãŸã¯æ‰‹å‹•ã§ãƒ†ã‚¹ãƒˆ\ncurl -X POST http://localhost:8888/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"username\": \"admin\", \"password\": \"password123\"}'\n```\n\n## ğŸ”§ åˆ©ç”¨å¯èƒ½ãªã‚µãƒ¼ãƒ“ã‚¹\n\n| ã‚µãƒ¼ãƒ“ã‚¹ | URL | èª¬æ˜ |\n|---------|-----|------|\n| ğŸŒ API Server | http://localhost:8888 | ãƒ¡ã‚¤ãƒ³API |\n| ğŸ“– API Docs | http://localhost:8888/docs | Swagger UI |\n| ğŸ—„ï¸ Database Admin | http://localhost:8080 | Adminer (DBç®¡ç†) |\n| ğŸ”„ Nginx Proxy | http://localhost:80 | ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚· |\n\n## ğŸ‘¥ ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆMock Cognitoï¼‰\n\n| Username | Password | Role |\n|----------|----------|------|\n| `admin` | `password123` | ç®¡ç†è€… |\n| `testuser` | `password123` | ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ |\n| `developer` | `password123` | é–‹ç™ºè€… |\n\n## ğŸ› ï¸ é–‹ç™ºã‚³ãƒãƒ³ãƒ‰\n\n### åŸºæœ¬æ“ä½œ\n```bash\nmake help              # åˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰ä¸€è¦§\nmake dev-start         # é–‹ç™ºç’°å¢ƒé–‹å§‹\nmake dev-stop          # é–‹ç™ºç’°å¢ƒåœæ­¢\nmake dev-restart       # é–‹ç™ºç’°å¢ƒå†èµ·å‹•\nmake dev-logs          # ãƒ­ã‚°è¡¨ç¤º\nmake dev-test          # APIãƒ†ã‚¹ãƒˆå®Ÿè¡Œ\nmake dev-clean         # ç’°å¢ƒã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\n```\n\n### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ\n```bash\nmake db-connect        # MySQL CLIæ¥ç¶š\nmake db-reset          # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒªã‚»ãƒƒãƒˆ\nmake db-backup         # ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ\nmake db-adminer        # Adminerèµ·å‹•\n```\n\n### ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆ\n```bash\nmake build             # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰\nmake test              # å˜ä½“ãƒ†ã‚¹ãƒˆ\nmake test-int          # çµ±åˆãƒ†ã‚¹ãƒˆ\n```\n\n## ğŸ” API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ\n\n### èªè¨¼ (Authentication)\n- `POST /auth/login` - ãƒ­ã‚°ã‚¤ãƒ³\n- `POST /auth/logout` - ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ\n- `GET /auth/me` - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—\n- `PUT /auth/me` - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ›´æ–°\n- `POST /auth/refresh` - ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥\n- `POST /auth/forgot-password` - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ\n- `POST /auth/confirm-forgot-password` - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆç¢ºèª\n\n### ç®¡ç†è€… (Admin)\n- `POST /admin/users` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ\n\n### ä¸€èˆ¬ (Public)\n- `GET /health` - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯\n- `GET /greeting/{name}` - å…¬é–‹æŒ¨æ‹¶\n- `GET /api/v1/greeting/{name}` - ä¿è­·ã•ã‚ŒãŸæŒ¨æ‹¶ï¼ˆèªè¨¼å¿…è¦ï¼‰\n\n## ğŸ§ª ãƒ†ã‚¹ãƒˆä¾‹\n\n### 1. ãƒ­ã‚°ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ\n```bash\ncurl -X POST http://localhost:8888/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"username\": \"admin\",\n    \"password\": \"password123\"\n  }'\n```\n\n### 2. ä¿è­·ã•ã‚ŒãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ\n```bash\n# ã¾ãšãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—\nTOKEN=$(curl -s -X POST http://localhost:8888/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"username\": \"admin\", \"password\": \"password123\"}' | jq -r '.access_token')\n\n# ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ã£ã¦ä¿è­·ã•ã‚ŒãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹\ncurl -X GET http://localhost:8888/auth/me \\\n  -H \"Authorization: Bearer $TOKEN\"\n```\n\n### 3. ç®¡ç†è€…æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ\n```bash\n# ç®¡ç†è€…ã§ãƒ­ã‚°ã‚¤ãƒ³\nADMIN_TOKEN=$(curl -s -X POST http://localhost:8888/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"username\": \"admin\", \"password\": \"password123\"}' | jq -r '.access_token')\n\n# æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆ\ncurl -X POST http://localhost:8888/admin/users \\\n  -H \"Authorization: Bearer $ADMIN_TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"username\": \"newuser\",\n    \"email\": \"newuser@example.com\",\n    \"first_name\": \"New\",\n    \"last_name\": \"User\"\n  }'\n```\n\n## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†\n\n### Adminerã‚’ä½¿ç”¨\n1. http://localhost:8080 ã«ã‚¢ã‚¯ã‚»ã‚¹\n2. æ¥ç¶šæƒ…å ±:\n   - **Server**: `mysql`\n   - **Username**: `user`\n   - **Password**: `password`\n   - **Database**: `database`\n\n### MySQL CLIã‚’ä½¿ç”¨\n```bash\nmake db-connect\n# ã¾ãŸã¯\ndocker-compose exec mysql mysql -u user -ppassword database\n```\n\n## ğŸ“Š ãƒ­ã‚°ã®ç¢ºèª\n\n```bash\n# å…¨ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°\nmake dev-logs\n\n# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿\ndocker-compose logs -f app\n\n# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã¿\ndocker-compose logs -f mysql\n```\n\n## ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°\n\n### ã‚ˆãã‚ã‚‹å•é¡Œ\n\n1. **ãƒãƒ¼ãƒˆãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹**\n   ```bash\n   # ä½¿ç”¨ä¸­ã®ãƒãƒ¼ãƒˆã‚’ç¢ºèª\n   lsof -i :8888\n   lsof -i :3306\n   lsof -i :8080\n   ```\n\n2. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼**\n   ```bash\n   # MySQLã‚³ãƒ³ãƒ†ãƒŠã®ãƒ­ã‚°ã‚’ç¢ºèª\n   docker-compose logs mysql\n   \n   # ã‚³ãƒ³ãƒ†ãƒŠã®å†èµ·å‹•\n   make dev-restart\n   ```\n\n3. **èªè¨¼ã‚¨ãƒ©ãƒ¼**\n   - ãƒ¢ãƒƒã‚¯CognitoãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª\n   - ç’°å¢ƒå¤‰æ•° `APP_ENV=development` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª\n   - ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®èªè¨¼æƒ…å ±ã‚’ç¢ºèª\n\n### ç’°å¢ƒã®ãƒªã‚»ãƒƒãƒˆ\n```bash\n# å®Œå…¨ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—ã¦å†é–‹å§‹\nmake dev-clean\nmake dev-start\n```\n\n## ğŸ”„ æœ¬ç•ªç’°å¢ƒã¸ã®åˆ‡ã‚Šæ›¿ãˆ\n\næœ¬ç•ªç’°å¢ƒã§ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„ï¼š\n\n1. **ç’°å¢ƒå¤‰æ•°ã®æ›´æ–°**\n   ```env\n   APP_ENV=production\n   MOCK_COGNITO=false\n   COGNITO_USER_POOL_ID=å®Ÿéš›ã®UserPoolID\n   COGNITO_CLIENT_ID=å®Ÿéš›ã®ClientID\n   COGNITO_CLIENT_SECRET=å®Ÿéš›ã®ClientSecret\n   ```\n\n2. **AWSèªè¨¼æƒ…å ±ã®è¨­å®š**\n   ```env\n   AWS_ACCESS_KEY_ID=å®Ÿéš›ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼\n   AWS_SECRET_ACCESS_KEY=å®Ÿéš›ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼\n   ```\n\n## ğŸ“ é–‹ç™ºãƒ¡ãƒ¢\n\n- ãƒ¢ãƒƒã‚¯Cognitoã¯é–‹ç™ºå°‚ç”¨ã§ã™\n- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã¯ `app-data-dev` ãƒœãƒªãƒ¥ãƒ¼ãƒ ã«ä¿å­˜ã•ã‚Œã¾ã™\n- æœ¬ç•ªç’°å¢ƒã§ã¯å¿…ãšå®Ÿéš›ã®AWS Cognitoã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„\n- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚ã€æœ¬ç•ªç’°å¢ƒã§ã¯ç’°å¢ƒå¤‰æ•°ã‚’é©åˆ‡ã«ç®¡ç†ã—ã¦ãã ã•ã„\n\n## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³\n\n1. `dev` ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰æ–°ã—ã„ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ\n2. å¤‰æ›´ã‚’å®Ÿè£…\n3. ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ: `make test`\n4. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ\n\n---\n\n**Happy Coding! ğŸ‰**\n"