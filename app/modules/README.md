# Modules ディレクトリ

## 役割・責務
ドメイン駆動設計（DDD）に基づいた機能モジュール群を管理します。
各モジュールは独立したビジネス機能を表し、完全に自己完結型の構造を持ちます。

## モジュール構成
- `auth/` - 認証・認可機能
- `users/` - ユーザー管理機能
- 今後のモジュール例: `products/`, `orders/`, `notifications/` など

## 設計原則

### 1. 単一責任原則（SRP）
各モジュールは一つのビジネスドメインに集中し、そのドメインに関する全ての機能を包含します。

### 2. 依存関係の管理
- モジュール間の直接的な依存は避ける
- 共通機能は `app/shared/` を通じて利用
- データベースアクセスはRepositoryパターンで抽象化

### 3. レイヤードアーキテクチャ
各モジュール内で以下の層構造を維持：

## モジュール内ファイル構成

### 必須ファイル
- `controller.go` - HTTPリクエスト処理
- `service.go` - ビジネスロジック実装
- `repository.go` - データアクセス抽象化
- `model.go` - ドメインモデル定義
- `dto.go` - データ転送オブジェクト
- `routes.go` - ルーティング設定

### オプションファイル
- `middleware.go` - モジュール固有のミドルウェア
- `validator.go` - 入力値検証ロジック
- `constants.go` - モジュール内定数
- `types.go` - 型定義

## AI開発ガイドライン

### モジュール作成時
1. 新しい機能は必ず独立したモジュールとして作成
2. 既存モジュールへの機能追加は慎重に検討
3. モジュール間の結合度を最小限に保つ

### 実装ルール
- 各層の責務を明確に分離
- インターフェースを使った依存性の逆転
- エラーハンドリングの統一
- テスタビリティを重視した設計

### 命名規則
- モジュール名: 複数形（users, products, orders）
- ファイル名: 単数形（controller.go, service.go）
- 構造体名: モジュール名 + 役割（UserService, AuthRepository）

## モジュール間通信
モジュール間で連携が必要な場合の推奨パターン：
1. Eventパターン（非同期通信）
2. Serviceレイヤーでの直接呼び出し（同期通信）
3. 共通のRepositoryを通じたデータ共有